{"version":3,"sources":["../../src/js/app.js"],"names":["symbols","board","state","turn","gameOver","currentComMode","DEBUG_MODE","$","document","ready","updateMode","on","hide","settings","getOptions","playerIsO","movingFirst","comMode","show","Board","renderBoard","makeComMove","getGameState","winner","announceWinner","getBlankSquares","length","toggleClass","hasClass","removeClass","addClass","click","id","attr","row","charAt","cell","setSquare","mouseenter","isBlank","text","mouseleave","oldMode","localStorage","getItem","setItem","DARK_MODE_TOGGLEABLE_ELEMENTS","newMode","$darkModeBtn","i","$element","mode","move","AI","findBestMove","rowIndex","cellIndex","getSquare","movingFirstInput","replace","Math","random"],"mappings":"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","file":"app.js","sourcesContent":["// NOTE: This may be the most hacky program I've ever made.\nvar symbols = {\n    \"player\": null,\n    \"computer\": null,\n    \"blank\": \" \"\n}\n\nvar board;\nvar state;\nvar turn;\nvar gameOver;\nvar currentComMode;\nconst DEBUG_MODE = false;\n\n$(document).ready(function () {\n    updateMode()\n    // Transition from choose symbol to play\n    $(\"#play-btn\").on('click', function () {\n        // Hide options/start menu\n        $(\"#start-menu\").hide();\n        // Check who is o and set symbols accordingly\n        let settings = getOptions();\n        if (settings.playerIsO) {\n            symbols[\"player\"] = 'O';\n            symbols[\"computer\"] = 'X';\n        } else {\n            symbols[\"player\"] = 'X';\n            symbols[\"computer\"] = 'O';\n        }\n        // Check who is moving first\n        turn = settings.movingFirst;\n        // Get computer difficulty\n        currentComMode = settings.comMode;\n        // Show the game page\n        $(\"#game\").show();\n        // Init board\n        board = new Board(DEBUG_MODE ? \"DEBUG\" : null);\n        renderBoard(board);\n        if (settings.movingFirst === \"com\") {\n            makeComMove(currentComMode);\n            // Check for win\n            state = board.getGameState()\n            if (state !== symbols['blank']) {\n                let winner = state === symbols['player'] ? \"Player\" : \"Computer\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            } else if (board.getBlankSquares().length == 0) {\n                let winner = \"Tie\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            }\n        }\n        renderBoard(board);\n    });\n\n    // Who is O toggle\n    $(\"#o-toggle .toggle\").on('click', function () {\n        $(\"#who-is-o .toggle\").toggleClass(\"button-filled-purple selected button-gray\")\n    });\n\n    // Moving first toggle\n    $(\"#moving-first-toggle .toggle\").on('click', function () {\n        if ($(this).hasClass(\"selected\")) {\n            return;\n        }\n        $(\"#moving-first-toggle .toggle\").removeClass(\"selected button-filled-purple\").addClass(\"button-gray\");\n        $(this).addClass(\"selected button-filled-purple\").removeClass(\"button-gray\");\n    });\n\n    // Difficulty toggle\n    $(\"#com-mode-toggle .toggle\").on('click', function () {\n        if ($(this).hasClass(\"selected\")) {\n            return;\n        }\n        $(\"#com-mode-toggle .toggle\").removeClass(\"selected button-filled-purple\").addClass(\"button-gray\");\n        $(this).addClass(\"selected button-filled-purple\").removeClass(\"button-gray\");\n    });\n\n    $(\".cell\").on({\n        click: function () {\n            if (!$(this).hasClass(\"blank\")) {\n                return;\n            }\n            if (turn === 'com' || gameOver) {\n                return;\n            } else {\n                turn = 'com';\n            }\n            $(this).removeClass('blank preview-move');\n            let id = $(this).attr(\"id\");\n            let row = id.charAt(0);\n            let cell = id.charAt(1);\n            board.setSquare(symbols[\"player\"], row, cell);\n            renderBoard(board);\n            // Check for win\n            let state = board.getGameState()\n            if (state !== symbols['blank']) {\n                let winner = state === symbols['player'] ? \"Player\" : \"Computer\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            } else if (board.getBlankSquares().length == 0) {\n                let winner = \"Tie\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            }\n            makeComMove(currentComMode);\n            // Check for win again\n            state = board.getGameState()\n            if (state !== symbols['blank']) {\n                let winner = state === symbols['player'] ? \"Player\" : \"Computer\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            } else if (board.getBlankSquares().length == 0) {\n                let winner = \"Tie\";\n                gameOver = true;\n                announceWinner(winner);\n                return;\n            }\n        },\n        mouseenter: function () {\n            let isBlank = $(this).hasClass(\"blank\");\n            if ($(this).hasClass(\"blank\") && turn === \"ply\") {\n                $(this).text(symbols['player']);\n                $(this).addClass(\"preview-move\");\n            }\n        },\n        mouseleave: function () {\n            // NOTE: Not trustworthy after being clicked, for some reason.\n            if ($(this).hasClass(\"blank\") && turn === \"ply\") {\n                $(this).text(symbols['blank']);\n                $(this).removeClass(\"preview-move\");\n            }\n        }\n    });\n\n    // Dark mode stuff\n    $(\"#dark-mode-button\").on('click', function () {\n        let oldMode = localStorage.getItem(\"mode\");\n        localStorage.setItem(\"mode\", oldMode == 'light' ? 'dark' : 'light');\n        updateMode();\n    });\n\n    function updateMode() {\n        const DARK_MODE_TOGGLEABLE_ELEMENTS = [\"body\", \".button\", \".select\", \"#board .cell\"];\n        let newMode = localStorage.getItem(\"mode\");\n        let $darkModeBtn = $(\"#dark-mode-button\")\n        if (newMode === \"dark\") {\n            for (let i = 0; i < DARK_MODE_TOGGLEABLE_ELEMENTS.length; i++) {\n                let $element = $(DARK_MODE_TOGGLEABLE_ELEMENTS[i]);\n                $element.addClass(\"dark\");\n            }\n            $darkModeBtn.removeClass(\"button-filled-dark\").addClass(\"button-filled-light\")\n                .text(\"Light Mode! 🌻\")\n        } else {\n            for (let i = 0; i < DARK_MODE_TOGGLEABLE_ELEMENTS.length; i++) {\n                let $element = $(DARK_MODE_TOGGLEABLE_ELEMENTS[i]);\n                $element.removeClass(\"dark\");\n            }\n            $darkModeBtn.addClass(\"button-filled-dark\").removeClass(\"button-filled-light\")\n                .text(\"Dark Mode! 🌙\")\n        }\n    };\n\n    $(\"#settings\").on('click', function () {\n        $(\"#play-btn\").hide();\n        $(\"#start-menu\").show();\n        $(\"#continue-btn\").show();\n        $(\"#game\").hide();\n    });\n\n    $(\"#continue-btn\").on('click', function () {\n        $(\"#start-menu\").hide();\n        $(\"#game\").show();\n    });\n\n    // Reset button\n    $(\"#reset-button\").on('click', function () {\n        let settings = getOptions();\n        board = new Board();\n        if (settings.playerIsO) {\n            symbols[\"player\"] = 'O';\n            symbols[\"computer\"] = 'X';\n        } else {\n            symbols[\"player\"] = 'X';\n            symbols[\"computer\"] = 'O';\n        }\n        $(\".cell\").addClass(\"blank\");\n        $(\"#winner\").text(\"\");\n        renderBoard(board);\n        turn = settings.movingFirst;\n        currentComMode = settings.comMode;\n        gameOver = false;\n        if (turn === \"com\") {\n            makeComMove(currentComMode);\n            turn = \"ply\";\n        }\n    });\n\n    function announceWinner(winner) {\n        if (winner == \"Tie\") {\n            $(\"#winner\").text(`It's a tie!`);\n        } else {\n            $(\"#winner\").text(`${winner} wins!`);\n        }\n    }\n\n    function makeComMove(mode) {\n        let move = AI.findBestMove(board, mode);\n        board.setSquare(symbols[\"computer\"], move.row, move.cell);\n        $(`table#board td#${move.row}${move.cell}`).removeClass(\"blank\");\n        renderBoard(board);\n        turn = \"ply\"\n    }\n\n    function renderBoard(board) {\n        for (let rowIndex = 0; rowIndex < 3; rowIndex++) {\n            for (let cellIndex = 0; cellIndex < 3; cellIndex++) {\n                $(`#board #${rowIndex}${cellIndex}`).text(board.getSquare(rowIndex, cellIndex));\n            }\n        }\n    }\n\n    function getOptions() {\n        let movingFirstInput = $(\"#moving-first-toggle .selected\").attr(\"id\").replace(\"-is-moving-first\", \"\");\n        let movingFirst = movingFirstInput == \"rnd\" ? (Math.random() < 0.5 ? \"ply\" : \"com\") : movingFirstInput;\n        let playerIsO = $(\"#o-toggle .selected\").attr(\"id\").replace(\"-is-o\", \"\") == \"ply\";\n        let comMode = $(\"#com-mode-toggle .selected\").attr(\"id\");\n        return {\n            movingFirst: movingFirst,\n            playerIsO: playerIsO,\n            comMode: comMode\n        }\n    }\n});"]}